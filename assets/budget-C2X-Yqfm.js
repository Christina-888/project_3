import{i as T}from"./burger-CPHaccMz.js";function I(){const r=document.getElementById("modalWelcome");window.onload=()=>{setTimeout(()=>{r.style.display="flex"},1500)};const s=r.querySelector("select"),n=r.querySelector(".budget__modal-btn");n.disabled=!0,s.addEventListener("focus",()=>{s.style.outline="none",s.style.border="2px solid rgb(62, 146, 192)"}),s.addEventListener("change",()=>{s.value!==""?(s.style.border="2px solid rgb(161, 187, 88)",s.classList.add("budget__text_green"),n.disabled=!1):(s.style.border="2px solid rgb(62, 146, 192)",s.classList.remove("budget__text_green"),n.disabled=!0)}),s.addEventListener("blur",()=>{s.value==""&&(s.style.border="2px solid rgb(62, 146, 192)")}),n.addEventListener("click",()=>{let c="";c=s.value,console.log(c),r.style.display="none"})}I();function W(){document.querySelectorAll(".budget__btn").forEach(s=>s.disabled=!0)}W();function $(){const r=document.querySelectorAll(".budget__date-input");console.log(r),(()=>{const n=new Date;let c=n.getMonth()+1;c<10&&(c="0"+c);let l=n.getDate();l<10&&(l="0"+l);const d=n.getFullYear()+"-"+c+"-"+l;r.forEach(a=>a.setAttribute("min",d))})()}function f(){const r=document.querySelectorAll(".budget__form"),s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate());let c=[];const l=e=>{for(let t of e.elements)t.required&&c.push(t)},d=()=>{for(let e of c)if(e.style.border!=="2px solid rgb(161, 187, 88)")return!1;return!0},a=e=>{e.elements.btn.disabled=!d()},i=(e,t)=>{e.style.border="2px solid rgb(62, 146, 192)",t&&t.classList.remove("budget__required-icon_valid")},m=(e,t)=>{e.style.border="2px solid rgb(161, 187, 88)",t&&t.classList.add("budget__required-icon_valid")},u=(e,t)=>{e.style.border="2px solid rgb(192, 98, 62)",t&&t.classList.remove("budget__required-icon_valid")},p=(e,t)=>{e.addEventListener("focus",()=>{e.tagName!=="BUTTON"&&(e.style.outline="none",i(e),e.matches("input.budget__date-input")&&(t.querySelector(".budget__calendar-wrap").style.display="none",t.querySelector(".budget__date-input-wrap").style.border="none",e.setAttribute("type","date"),$()))})},y=(e,t)=>{e.addEventListener("change",()=>{if(e.tagName==="SELECT")if(!e.required)e.style.border="2px solid rgb(161, 187, 88)";else{const o=e.nextElementSibling.querySelector(".budget__required-icon");l(t),e.value==""?(u(e,o),a(t)):(m(e,o),a(t))}})},_=(e,t)=>{e.addEventListener("input",()=>{if(l(t),e.tagName==="INPUT"&&!e.matches("input.budget__checkbox")){const o=e.parentElement.nextElementSibling.querySelector(".budget__required-icon");if(e.value=="")i(e,o),a(t);else if(!e.required)e.style.border="2px solid rgb(161, 187, 88)";else if(!e.matches("input.budget__date-input"))isNaN(e.value)||+e.value==0||+e.value[0]==0&&e.value[1]&&e.value[1]!=="."?(u(e,o),a(t)):(m(e,o),a(t));else{const E=new Date(e.value.substring(0,4),e.value.substring(5,7)-1,e.value.substring(8,10));e.value==""?(i(e,o),a(t),t.querySelector(".budget__calendar-wrap").style.display="flex"):E<n?(u(e,o),a(t)):(m(e,o),a(t))}}})},v=(e,t)=>{e.addEventListener("blur",()=>{e.tagName!=="BUTTON"&&(e.required?(l(t),e.matches("input.budget__date-input")?e.value==""&&(e.style.border="none",e.parentElement.style.border="2px solid rgb(192, 98, 62)",e.setAttribute("type","text"),t.querySelector(".budget__calendar-wrap").style.display="flex",a(t)):e.value==""&&(e.style.border="2px solid rgb(192, 98, 62)",a(t))):e.style.border="2px solid rgb(161, 187, 88)")})},q=e=>{e.querySelectorAll(".budget__calendar-icon").forEach(o=>o.addEventListener("click",()=>{e.elements.date.focus()}))};for(let e of r){q(e);for(let t of e.elements)p(t,e),y(t,e),_(t,e),v(t,e)}}f();function F(){const r=document.getElementById("incomes-switch"),s=document.getElementById("expenses-switch"),n=document.getElementById("form-incomes"),c=document.getElementById("form-expenses"),l=document.querySelector(".budget__switch-indicator-wrap");c.style.display="none";const d=()=>{n.style.display="flex",c.style.display="none",l.style.justifyContent="start"},a=()=>{n.style.display="none",c.style.display="flex",l.style.justifyContent="end"};document.querySelector(".budget__switch").addEventListener("click",i=>{i.target===r&&(d(),f()),i.target===s&&(a(),f()),i.target===l&&(n.style.display==="none"?(d(),f()):(a(),f()))})}F();function O(){const r=document.querySelectorAll(".budget__form"),s=document.getElementById("transactionsMessage");for(let n of r)n.elements.btn.addEventListener("click",c=>{c.preventDefault(),console.log("Форма отправлена"),s.style.display="none";class l{constructor(h,C,D,k,M,B,A,N){this.name=h,this.type=C,this.comment=D,this.value=k,this.currency=M,this.date=B,this.reminder=A,this.taskList=N}}const d=new l;d.name=n.name,d.type=n.type.value,d.comment=n.comment.value,d.value=n.sum.value,d.currency=n.currency.value,d.date=n.date.value,d.reminder=n.reminder.value,n.taskList==null?d.taskList="none":d.taskList=n.taskList.checked,console.log(d);const a=n.elements.date.value;console.log(a);const i=document.querySelector(".budget__transactions"),m=document.createElement("div");m.classList.add("budget__year-transaction-wrap"),i.append(m);const u=document.createElement("h3");u.classList.add("budget__transaction-subtitle"),m.append(u),u.textContent=a.substring(0,4);const p=document.createElement("div");p.classList.add("budget__month-transaction-wrap"),i.append(p);const y=document.createElement("div");y.classList.add("budget__transactions-date"),p.append(y);const _=document.createElement("h3");_.classList.add("budget__subtitle"),y.append(_);const v=+a.substring(5,7);console.log(v);const e=(b=>{const h=new Date;return h.setMonth(b-1),h.toLocaleString("en-US",{month:"long"})})(v),t=+a.substring(8,10);_.textContent=`${e}, ${t}`;const o=document.createElement("div");o.classList.add("budget__transactions-wrap"),p.append(o);const E=n.elements.sum.value,w=n.elements.currency.value.slice(-5).replace("(","").replace(")",""),S=n.elements.type.value,g=document.createElement("p");g.classList.add("budget__text");const x=document.createElement("p");x.classList.add("budget__text"),n.name.includes("Incomes")?(g.classList.add("budget__text_green"),g.textContent=`+${Math.round(+(E*100))/100} ${w}`):(g.classList.add("budget__text_red"),g.textContent=`-${Math.round(+(E*100))/100} ${w}`),x.textContent=S,o.append(g,x);const L=n.elements.comment.value;if(console.log(L),L!==""){const b=document.createElement("p");b.classList.add("budget__transaction-comment"),b.textContent=L,o.classList.add("budget__transactions-wrap_comment"),o.append(b)}})}O();document.addEventListener("DOMContentLoaded",()=>{T()});console.log("budget");
